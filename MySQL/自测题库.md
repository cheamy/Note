# 存储引擎

## 说一说执行一条查询 SQL 语句的全过程

一条select会经过连接器, 查询缓存, 解析器, 优化器, 执行器, 存储引擎这些模块

1. MySQL的连接器会负责建立连接, 校验用户身份, 接受客户端的SQL语句
2. MySQL会在查询缓存中查找数据, 如果命中直接返回给用户, 否则继续往下执行, 不过查询缓存在8.0之后被删除了, 因为只要对这张表进行写操作, 这张表的查询缓存会失效
3. MySQL的解析器会对SQL语句进行词法分析和语法分析, 然后构建语法树
4. MySQL优化器会基于查询成本的考虑, 判断每个索引的执行成本, 从中选择查询成本最小的执行计划
5. MySQL的执行器会根据执行计划执行查询语句, 从存储引擎读取记录, 返回给客户端

## MySQL 存储引擎有哪些？各自有什么区别？

1. InnoDB: MySQL的默认存储引擎, 支持事务和行级锁, 具有事务提交, 回滚和崩溃恢复的功能
2. MyISAM: 还没有用过, 但是有了解过它不支持事务和行级锁, 而且锁的粒度比较大, 因为只支持表锁, 更新性能差, 我觉得更适合读多写少的场景
3. Memory: 了解不多, 知道它是将数据存储到内存里的, 所以读写较快, 但不具备持久性, 我觉得适用于临时存储数据的场景

## MyISAM 和 InnoDB 存储引擎有什么区别？



## 用 count(*) 哪个存储引擎会更快？

## NULL 值是如何存储的？

## char 和 varchar 有什么区别？

## 假如说一个字段是varchar(10)，但它其实只有6个字节，那他在内存中占的存储空间是多少？在文件中占的存储空间是多少？

## 普通索引和唯一索引有什么区别？哪个更新性能更好？

# 索引结构

## MySQL 有哪些索引类型？

## InnodB 引擎的索引数据结构是什么？

## 为什么索引用 B+ 树？而不用红黑树？

## 为什么索引用 B+ 树？而不用 B 树？

## 为什么索引用 B+ 树？而不用哈希表？

## 聚簇索引和非聚簇索引有什么区别？

## insert  操作对 B+ 树结构的改变是怎么样的？

## 假如一张表有两千万的数据，B+树的高度是多少？怎么算的？

# 索引应用

## MySQL 有哪些索引？

## 为什么要建索引？

## 我们一般选择什么样的字段来建立索引？

## 索引越多越好吗？

## 索引怎么优化？

## 建立了索引，查询的时候一定会用到索引吗？

## 什么是最左匹配原则？

## 联合索引 （a,b,c），下面的查询语句会不会走索引？如果走具体是哪些字段能走？

1. select * from T where a=1 and b=2 and c=3;
2. select * from T where a=1 and b>2 and c=3;
3. select * from T where c=1 and a=2 and b=3;
4. select * from T where a=2 and c=3;
5. select * from T where b=2 and c=3;
6. select (a,b) from T where a=1 and b>2

## **where a>1 and b = 2 and c <3怎么建立索引？**

# 事务

## MySQL 事务有什么特性？

## 事务的隔离性如何保证？

## 事务的持久性如何保证？

## 事务的原子性如何保证？

## MySQL 事务隔离级别有哪些？分别解决哪些问题？

## 脏读幻读有什么区别？

## MySQL默认的隔离级别是什么？怎么实现的？

## 介绍一下 MVCC 

## MVCC的如何判断行记录对某一个事务是否可见

## 读已提交和可重复读隔离级别实现  MVCC 的区别？

## 为什么互联网公司用读已提交隔离级别？

## 可重复读解决了什么问题？有没有完全解决幻读？

## 可重复度为什么不能完全避免幻读？什么情况下出现幻读？

# 锁

## 详细说一下 MySQL数据库中锁的分类

## 在线上修改表结构，会发生什么？

## Innodb 存储引擎中的行级锁有哪些？

## 一条Update语句没有带where条件，加的是什么锁？

## 带了where条件没有命中索引，加的是什么锁？

## 两条更新语句更新同一条记录，加的是什么锁？

## 两条更新语句更新同一条记录的不同字段，加的是什么锁？

## MySQL 怎么实现乐观锁？

## 了解过 MySQL 死锁问题吗？

## MySQL 怎么排查死锁问题？

## MySQL 怎么避免死锁？

# 日志

## MySQL 有哪些日志？有什么区别？

## redo log 和 binlog 的区别和应用场景？

## redolog 是怎么实现持久化的？

## 为什么事务提交需要两阶段提交？

## 两阶段提交的过程是怎样的？

# 性能优化

## 怎么找到慢 SQL?

## 如何优化慢 SQL?

## 深分页场景如何优化？

## 如果 SQL 和索引都没问题，查询还是很慢怎么办？

# 高可用

## MySQL 主从复制的过程是怎么样？

## MySQL  主从复制的数据延迟怎么处理？

## MySQL 提供了几种复制模式？默认的复制模式是什么？

## MySQL 主从架构中，读写分离怎么实现？

## MySQL 主库挂了怎么办？

## 什么是分库分表？什么时候需要分表？什么时候需要分库？

## 分库分表后，会产生什么问题？怎么解决？
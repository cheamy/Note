## Go

###  切片的底层原理

切片底层指向一个数组, 有两个字段记录长度信息和容量信息

### map的底层原理

map底层指向一个hmap结构体, hmap里有一个buckets数组, 数组里存放的结构是bmap, bmap中存放八个tophash, 八个key和八个value, 一个桶中放不下的话会用链表再接桶

### map不是并发安全的, 对于并发场景怎么处理

可以加读写锁, 或者使用go提供的并发安全的sync.Map

### channel底层原理

底层指向一个hchan机构体, 里面有一个循环数组用来存放数据, 用两个指针记录下次读和下次写的位置

还有两个goroutine等待队列, 读阻塞就放进recvq队列中, 写阻塞就放进sendq队列中

hchan里还有个互斥锁, 数据读写时用来加锁

### GMP调度模型

G代表goroutine, M代表线程, P代表调度器, goroutine需要通过P绑定到M上才可以执行, 每个P有个本地调度队列, 当本地调度队列为空时会去全局的goroutine队列获取G, 如果全局队列也为空, 则去窃取其他M上P的G. P的本地调度队列满了的话, 会有一个g0把队列中前一半的G放进全局队列

### GC

go的GC采用混合写屏障和三色标记法. 三色标记法一开始会把所有对象标为白色, 然后从根对象出发, 把和根对象有关系的对象都标为灰色, 然后遍历灰色对象, 把它们标记为黑色, 然后遍历黑色对象, 把跟黑色节点有关系的都标为灰色, 一直重复直到灰色对象集合为空, 然后回收白色对象

### 逃逸分析

就是go编译器对于无法确定生命周期的对象, 不会分配到栈中而是分配到堆中



## MySQL

### int和tinyint的区别

int长度是4字节, tinyint长度是1字节

### InnoDB索引有哪些

有聚簇索引和非聚簇索引

### 回表是什么

因为非聚簇索引存放的是索引字段和主键, 当非覆盖查询走的是非聚簇索引时, 会先拿主键再回到聚簇索引中查找记录

### 描述一下索引如何实现

B+树, 非叶子节点存放索引, 叶子节点存放数据, 叶子节点用双链表的结构, 方便范围查询

### 联合索引(a, b, c), where条件是b, c, 会走索引吗

不会, 因为联合索引是先对a进行排序, 在a有序的前提下再对b排序,再对c排序, 所以此时联合索引中b其实是无序的, 也就不会走这条索引

### 简要描述一下MySQL事务

ACID

### 隔离级别都有哪些

1. 读未提交
2. 读提交
3. 可重复读
4. 串行化

### 都有哪些日志, 都有什么作用

binlog

undolog

redolog

### MySQL锁的原理

在内存中有一个结构体, 里面维护锁信息, 事务id还有锁的状态(前几天刚好在答疑群中看到)

### ==事务里多条语句, 回退到某条语句要怎么操作==

不知道......后来查了可以用SAVEPOINT

### SQL调优是怎么做的

说了下加了联合索引, 用redis做缓存, 连接池, 还有本来是count(*), 现在是select最后一条记录的id

### 一条SQL命中索引还是慢, 怎么办

我说的是可能数据量太大, 可以考虑分表

### ==分表如何保证新表和旧表数据一致性==

没理解她的意思, 新表和旧表数据不应该本来就不一样的吗, 直接说不知道了......

## Redis

### Redis常用数据类型和使用场景

String 可以存放点赞数

List 放置批量信息, 比如一批任务id

Hash 因为查询复杂度是O(1), 适合一些查询多的场景

Set 适合无序集合, 比如用户关注的公众号

ZSet 适合有序集合, 比如游戏排行榜

### 如何保证redis缓存数据和MySQL数据一致性

1. 只更新MySQL, Redis用过期时间兜底
2. 更新MySQL之后更新Redis
3. 更新MySQL之后异步更新Redis

### 缓存穿透 击穿 雪崩, 怎么引起, 如何解决

1. 缓存穿透就是缓存里没有的MySQL里也没有, 可以用布隆过滤器快速判断是否在集合里
2. 缓存击穿是数据库里有但缓存里没有的数据, 可以热点数据续期, 也可以加互斥锁后重建缓存
3. 缓存雪崩是有一大批数据库里有但缓存里没有的数据, 可以随机设置过期时间, 防止大批数据同时过期, 也可以加互斥锁之后重建缓存

### redis内存淘汰算法

1. LRU, 淘汰掉最近最久未使用, Redis是随机采样n个key, 从里面淘汰最久的
2. LFU, 淘汰掉活跃度最低的
3. Random, 随机回收键

### 持久化策略

RDB和AOF, RDB就是快照, 存放二进制数据, 是Redis默认开启的持久化方式,AOF是日志, 存放Redis历史指令. AOF存盘有三种策略, 分别是每条指令一次, 每秒一次, 或者交由操作系统落盘

### Redis用的多吗, 都用来干什么

有在项目中用Redis实现缓存和分布式锁

### 分布式锁是怎么做的

SET key owner EX NX 过期时间 

### kafka rocketmq有了解吗

知道是消息队列, 没有用过



## 网络

### TCP UDP

### http三次握手四次挥手



## 编程

### 切片移除某个index的元素